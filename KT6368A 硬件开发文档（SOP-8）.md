---

# KT6368A 硬件开发文档（SOP-8）

## 1. 芯片定位与适用场景

* **定位**：低成本、极简外围的 **Bluetooth 双模数据芯片**（BLE + SPP），典型用法是**UART 透传 + AT 配置**。([cdn.hackaday.io][2])
* **协议**：datasheet 标注支持 Bluetooth V5.x（不同版本资料会写 V5.0 或 V5.1）并支持 BR/EDR/BLE 双模。([aitendo3.sakura.ne.jp][1])
* **典型产品**：串口蓝牙透传模块、低功耗小型外设、简单人机交互（按键/指示灯/蜂鸣器）等。

> 重要：KT6368A 通常不是“给你裸写应用固件的通用 MCU”用法；绝大多数成品都是**运行厂商固件**，硬件侧以“配套固件功能”为设计前提。([hacksterio.s3.amazonaws.com][3])

---

## 2. 供电与电源完整性（Power）

### 2.1 供电范围与建议

* 推荐工作电压：**3.3V**；工作范围资料常见为 **2.2V–3.4V**（与纽扣电池/单节锂电适配）。([Scribd][4])
* 测试板/装配注意强调：**不要超过 3.6V**，否则可能损坏芯片。([Scribd][5])

### 2.2 电流特性（用于电源预算/电池寿命估算）

* 启动瞬态电流：约 **26mA**（启动后约 1 秒降到 ~4mA 的描述见 HID 方案手册 Q&A）。([Scribd][4])
* 低功耗模式：AT 文档对低功耗模式给出典型电流：进入瞬态约 25mA（约 300ms），未连接低功耗维持可到 **几十 µA 级**（文档示例 20µA）。([cdn.hackaday.io][2])

> 设计含纽扣电池/反丢器这类“长待机”产品时，电源与 IO 上拉/下拉必须按“低功耗模式 IO 高阻”的特性去做（见 6.2）。([cdn.hackaday.io][2])

### 2.3 去耦/储能建议（通用做法）

* VBAT 就近放置：**0.1µF + 1µF**（或更大）去耦；走线尽量短，回地路径低阻抗。
* 若蜂鸣器/LED 等瞬态负载较大，建议在 VBAT 侧再加 4.7–10µF 级储能电容（靠近负载与芯片供电节点）。

（去耦值在不同参考资料中会给“105=1µF”一类建议；以你的应用可以按常规电源完整性做法适当加大。([Scribd][5])）

---

## 3. 封装与引脚定义（Pinout）

KT6368A 为 **SOP-8** 封装。基础 pin 定义如下（以 datasheet 为准）：([aitendo3.sakura.ne.jp][1])

* **Pin1：VBAT / VDDIO（电源）**
* **Pin3：VSS（GND）**
* **Pin4：BT_RF / BT Antenna（射频单端天线脚）**
* **Pin5：BTOSCI（高频晶振输入）**
* **Pin6：BTOSCO（高频晶振输出）**
* **Pin2：PB1（GPIO/复用功能较多，常见用作状态/控制）**
* **Pin7/Pin8：标称 USBDM/USBDP，但在资料中允许复用为 GPIO/UART/USB 等（取决于固件/模式）** ([aitendo3.sakura.ne.jp][1])

> 你实测“1=VBAT、3=GND、4=天线、5/6=晶振、7=LED、8=按键、2=蜂鸣器/控制脚”的板型，在引脚资源上是完全成立的：RF 与晶振占 3 脚，其余 2/7/8 做 IO 足够。([aitendo3.sakura.ne.jp][1])

---

## 4. 时钟（Crystal）设计

KT6368A 通常需要外接 **高频晶体**到 Pin5/Pin6（BTOSCI/BTOSCO）。([aitendo3.sakura.ne.jp][1])

硬件要点：

1. **晶体靠近芯片**（Pin5/6 到晶体走线极短、对称、等长，周围不要走高噪声线）。
2. 负载电容按晶体规格书的 **CL** 选型（常见在 8–12pF 级，需结合 PCB 寄生）。
3. 晶体回路地参考要干净：负载电容回地就近打地过孔，避免与蜂鸣器/LED 回流共享长地线。

在一些“标准原理图/参考设计”资料中会对晶体频偏、负载等做要求描述（用于蓝牙稳定性与认证风险控制）。([Scribd][6])

---

## 5. 射频与天线（RF）

### 5.1 BT_RF（Pin4）与天线连接模式

* datasheet 直接给出 **BT_RF / BT Antenna** 单端输出脚。([aitendo3.sakura.ne.jp][1])
* 测试板/装配注意提到：天线匹配位常见使用 **2.7pF**，但“实作也常用 0Ω 代替”；量产建议保留可调位置。([Scribd][5])

### 5.2 推荐 RF 布局要点（强约束）

1. **Pin4 到天线馈点的走线尽量短**、保持连续参考地、避免穿越分割地。
2. **天线附近 keep-out**：天线区域下方/附近尽量不要铺地或放置金属/电池（你这种背面是 CR2032，天线应尽量远离电池边缘且保证净空）。
3. **预留匹配网络焊盘**（哪怕初版 0Ω/不装），用于产测与不同壳体/电池/装配条件下调优。([Scribd][5])

> 你板上“没有电感、RF 直接出天线”不代表“没有匹配概念”，更可能是“匹配位用 0Ω/省略装配”。量产要做射频一致性，建议预留可调位。([Scribd][5])

---

## 6. IO、电平与低功耗注意事项

### 6.1 IO 复用与外设连接

* PB1（Pin2）与 Pin7/Pin8 在不同固件/模式下可承担：GPIO、串口、USB、状态指示等功能。([aitendo3.sakura.ne.jp][1])
* 你这种“蜂鸣器+LED+按键”的组合，常见实现是：

  * **蜂鸣器**：用 PB1 输出 PWM/方波，或 PB1 驱动外置三极管/MOS（更稳，电流也可控）。
  * **LED**：直接 IO + 限流电阻（建议 1–5mA 级），或 IO 驱动晶体管。
  * **按键**：IO 输入 + 上拉（内部/外部）；去抖可软件或 RC。

### 6.2 低功耗模式下 IO 状态（非常关键）

AT 文档明确写到：进入低功耗后 **“所有 IO 口为高阻态”**，并建议必要时给 Pin2/7/8 做上拉以判定 IO 状态、避免外部 MCU 误收垃圾数据等问题。([cdn.hackaday.io][2])

对硬件的直接要求：

* **不要让关键控制对象依赖“IO 默认电平”**（因为低功耗会高阻漂移）。
* 蜂鸣器/LED/外部开关管的栅极/基极建议加**硬件上拉/下拉**，确保低功耗时处于“确定的安全态”（例如蜂鸣器默认关断）。([cdn.hackaday.io][2])

---

## 7. 串口与调试/量产接口（UART / Boot Info）

### 7.1 UART（AT 配置入口）

* AT Command 文档给出大量配置项（名称、地址、低功耗、参数存储等）；默认 UART 波特率在多份文档中出现 **115200**。([cdn.hackaday.io][2])

硬件建议：

* 预留 UART 测试点（TX/RX/GND/VBAT），用于产测写参数、老化测试、问题定位。
* 串口电平按 VBAT/VDDIO（通常 3.3V 系）。
* 若产品使用低功耗（CL）模式，注意：文档描述低功耗下 AT 有效窗口与连接状态有关（例如上电前几秒可识别等），这会影响产线流程设计。([cdn.hackaday.io][2])

### 7.2 生产一致性（地址/参数写入）

AT 文档提到 **BLE 地址与 SPP 地址的关系**（SPP 地址由 BLE 地址高字节 +1 推导），因此量产通常只需要写 BLE 地址。([cdn.hackaday.io][2])

---

## 8. 固件升级/下载与“USBDP/USBDM”脚的硬件策略

多份资料显示 Pin7/Pin8 虽标为 USBDM/USBDP，但在不同场景会被用作**下载/升级**或复用为 IO/UART。([aitendo3.sakura.ne.jp][1])

硬件建议（面向可维护性）：

1. **强烈建议预留 Pin7/Pin8 的测试点/焊盘**（即使当前用作 LED/按键，也要能在产测夹具上接入）。
2. 若 Pin7/8 外接 LED/按键，建议通过电阻/可断开设计，确保升级/调试时不被外部电路强拉电平或注入噪声。
3. 产线若需要固件升级（而不是仅写 AT 参数），应按厂商/方案提供的下载工具与流程设计夹具（这部分资料分散在测试板说明/方案手册中）。([Scribd][5])

---

## 9. 参考硬件框图（建议最小系统）

### 9.1 最小系统（BLE/SPP 透传）

* VBAT：2.2–3.4V
* 去耦：0.1µF + 1µF（就近）
* 晶体：连接 Pin5/6，配负载电容
* 天线：Pin4 → 匹配预留（0Ω/2.7pF 位置）→ PCB 天线
* UART：TX/RX 测试点用于 AT 配置
* IO：PB1/Pin7/Pin8 用于 LED/按键/蜂鸣器（根据固件复用）([aitendo3.sakura.ne.jp][1])

### 9.2 纽扣电池反丢/蜂鸣器版本（你当前板型）

* 蜂鸣器建议：IO → 驱动管 → 蜂鸣器（减少 IO 直驱电流压力、改善波形与响度一致性）
* LED：IO → 限流电阻 → LED
* 按键：IO 输入 + 上拉（外部 100k 级可以降漏电；是否需要取决于固件的上拉与低功耗策略）([cdn.hackaday.io][2])

---

## 10. 产测与验证清单（硬件侧）

1. **供电边界**：2.2–3.4V（不要 >3.6V）。([Scribd][4])
2. **晶体起振/频偏**：上电广播稳定，连接不掉线；异常时优先排查晶体布局、负载电容。([Scribd][6])
3. **RF 性能**：不同装配状态（装电池/装外壳/手持）RSSI 与距离一致性；必要时通过匹配位微调（2.7pF/0Ω替换）。([Scribd][5])
4. **低功耗**：验证 IO 高阻引起的误触发风险（蜂鸣器误响、LED 漏亮、按键漂移），用外部上拉/下拉修正。([cdn.hackaday.io][2])
5. **AT 产线流程**：默认波特率（常见 115200），AT 参数写入与保存、地址写入策略。([Scribd][4])

---

## 11. 资料索引（建议你本地归档）

* KT6368A Datasheet（引脚、RF/晶体、总体规格）([aitendo3.sakura.ne.jp][1])
* KT6368A Chip User Manual（双模、状态查询、使用/调试）([hacksterio.s3.amazonaws.com][3])
* KT6368A AT Command（低功耗、地址规则、AT 行为细节）([cdn.hackaday.io][2])
* KT6368A Test Board/SMT Notes（天线 2.7pF/0Ω、供电上限等工程经验）([Scribd][5])
* BLE 标准原理图/参考电路（晶体与电源/接口的参考连法；来源于方案资料汇总）([Scribd][6])

---

